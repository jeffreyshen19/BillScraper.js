<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: database/generateDB.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: database/generateDB.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var createBill = require("./createBill");
var getBulk = require("../scraper/getBulk");

var validBillTypes = ["s", "hr"];

/**
 * Automatically generates the entire database of bills
 * @example
 * generateDB()
 */

var generateDB = function(type, congress, session){
  //TODO: check that congress and session is valid

  if(!validBillTypes.includes(types)) throw new TypeError("The Bill type is not one of the valid bill types which needs to be of either the Senate or House ('s', 'hr').", "generateDB.js", 15);
 
  getBulk(type, function(res){
    var i = 0;
    var interval = setInterval(function(){
      if(i == res.length) clearInterval(interval);
      try{
        createBill(res[i]);
      }
      catch(e){
        console.log("Unable to save " + res[i]);
      }
      i++;
    }, 100);
  }, {
    congress: congress,
    session: session
  });
};

module.exports = generateDB;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#cleanBill">cleanBill</a></li><li><a href="global.html#cleanBillStatus">cleanBillStatus</a></li><li><a href="global.html#createBill">createBill</a></li><li><a href="global.html#generateDB">generateDB</a></li><li><a href="global.html#getBill">getBill</a></li><li><a href="global.html#getBillStatus">getBillStatus</a></li><li><a href="global.html#getBulk">getBulk</a></li><li><a href="global.html#getBulkStatus">getBulkStatus</a></li><li><a href="global.html#recursivelyGenerateBody">recursivelyGenerateBody</a></li><li><a href="global.html#tagBill">tagBill</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Feb 16 2018 21:37:39 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
